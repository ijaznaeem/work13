<div class="modal-header">
  <h4 class="modal-title pull-left">
    Reg No: {{ PatientData.regno }} {{ PatientData.fullname }}
  </h4>
  <button
    type="button"
    class="close pull-right"
    aria-label="Close"
    (click)="bsModalRef.hide()"
  >
    <span aria-hidden="true">Ã—</span>
  </button>
</div>
<div class="modal-body">
  <div class="row no-gutter">
    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-body">
          <div class="row no-gutter">
            <div class="col-md-3">
              <div class="alert alert-success">
                <div class="row no-gutter">
                  <div class="col-md-6 text-left">Age:</div>
                  <div class="col-md-6 text-right">
                    <strong class="d-inline-block">{{
                      PatientData.dob | DateAsAgo
                    }}</strong>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="alert alert-success">
                <div class="row no-gutter">
                  <div class="col-md-6 text-left">Height:</div>
                  <div class="col-md-6 text-right">
                    <strong class="d-inline-block">{{
                      PatientData.height
                    }}</strong>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="alert alert-success">
                <div class="row no-gutter">
                  <div class="col-md-6 text-left">Weight:</div>
                  <div class="col-md-6 text-right">
                    <strong class="d-inline-block">{{
                      PatientData.weight
                    }}</strong>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="row no-gutter">
                <div class="col-md-12">
                  <button
                    type="button"
                    class="mb-1 btn btn-success form-control"
                    (click)="EditReg()"
                    accesskey="a"
                  >
                    <i class="fa fa-save"></i>
                    Edit Registration
                  </button>
                </div>
                <div class="col-md-12">
                  <button
                    type="button"
                    class="btn btn-success form-control"
                    (click)="OpenProfile()"
                    accesskey="a"
                  >
                    <i class="fa fa-save"></i>
                    Show Profile
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <form>
    <div class="row no-gutter">
      <div class="col-md-12">
        <div class="row no-gutter">
          <div class="col-md-12">
            <div class="form-group">
              <h5 class="mt-3 text-primary">Doctors's Notes</h5>
              <textarea
                name="notes"
                id="notes"
                #remarks
                style="
                  height: 50px;
                  color: black;
                  font-size: 14px;
                  font-weight: bold;
                "
                [scrollTop]="remarks.scrollHeight"
                class="form-control w-100"
                [(ngModel)]="ApptData.remarks"
              >
              </textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
  <div class="row no-gutter">
    <div class="col-md-12">
      <h5 class="mt-3 text-primary">Advise Medicine</h5>
      <form #frmMed="ngForm">
        <div class="row no-gutter">
          <div class="form-group col-md-3">
            <label for="customer">Medicines</label>
            <ejs-combobox
              name="customer"
              id="customer"
              [dataSource]="Medicines"
              [fields]="{ text: 'medicine_name', value: 'medicine_id' }"
              [(ngModel)]="PatMed.medicine_id"
            >
            </ejs-combobox>
          </div>
          <div class="form-group col-md-1">
            <label for="customer">Quantity</label>
            <input
              type="number"
              name="qty"
              id="qty"
              class="form-control"
              [(ngModel)]="PatMed.dose_qty"
            />
          </div>
          <div class="form-group col-md-4">
            <label for="customer">Times</label>

            <ejs-combobox
              name="dose"
              id="dose"
              style="width: 100%"
              [dataSource]="ItemsGroups['TIMING']"
              [fields]="{ text: 'item', value: 'item' }"
              [(ngModel)]="PatMed.dose"
            >
              <ng-template #headerTemplate="" let-data="">
                <a (click)="AddItems('TIMING')"> AddData</a>
              </ng-template>
            </ejs-combobox>
          </div>
          <div class="form-group col-md-2">
            <label for="customer">Instructions</label>
            <ejs-combobox
              name="Instructions"
              id="Instructions"
              [dataSource]="ItemsGroups['INSTRUCTIONS']"
              [fields]="{ text: 'item', value: 'item' }"
              [(ngModel)]="PatMed.instructions"
            >
              <ng-template #headerTemplate="" let-data="">
                <button class="btn btn-sm" (click)="AddItems('INSTRUCTIONS')">
                  AddData
                </button>
              </ng-template>
            </ejs-combobox>
          </div>

          <div class="col-md-2">
            <div class="form-group">
              <label>&nbsp;</label>
              <button
                type="submit"
                class="btn btn-primary form-control"
                (click)="AddMedicine()"
                accesskey="a"
              >
                <i class="fa fa-plus"></i>
                Add
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="row no-gutter">
    <div class="col-md-12">
      <ft-dynamic-table
        [Settings]="setting"
        [Data]="ApptData.med"
        (ClickAction)="ActionClicked($event)"
      ></ft-dynamic-table>
    </div>
  </div>
  <div class="row no-gutter">
    <div class="col-md-10">
      <h5 class="mt-3">Advise Lab Tests</h5>
      <form #frmLab="ngForm">
        <div class="row no-gutter">
          <div class="form-group col-md-8">
            <label for="customer">Lab Test</label>
            <ejs-combobox
              name="labtest"
              id="labtest"
              [dataSource]="LabTests"
              [fields]="{ text: 'test_name', value: 'test_id' }"
              [(ngModel)]="PatLabTest.labtest_id"
            >
            </ejs-combobox>
          </div>

          <div class="col-md-4">
            <div class="form-group">
              <label>&nbsp;</label>
              <button
                type="submit"
                class="btn btn-primary form-control"
                (click)="AddLab()"
                accesskey="a"
              >
                <i class="fa fa-plus"></i>
                Add Lab
              </button>
            </div>
          </div>
        </div>
      </form>
      <div class="row no-gutter">
        <div class="col-md-12">
          <ft-dynamic-table
            [Settings]="labsetting"
            [Data]="ApptData.lab"
            (ClickAction)="LabClicked($event)"
          ></ft-dynamic-table>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="row no-gutter">
        <div class="col-md-12">
          <label for="dtFrom">Next Visit Date:</label>
          <div class="input-group">
            <input
              class="form-control"
              placeholder="yyyy-mm-dd"
              name="dtFrom"
              [(ngModel)]="ApptData.next_date"
              ngbDatepicker
              #dtFrom="ngbDatepicker"
            />
            <div class="input-group-addon">
              <button
                type="button"
                class="btn btn-warning"
                (click)="dtFrom.toggle()"
              >
                <i class="fa fa-calendar"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="row no-gutter">
        <div class="col-md-12">
          <div class="form-group">
            <label for="">&nbsp;</label>
            <button
              type="submit"
              class="btn btn-primary form-control"
              (click)="SaveNotes()"
              accesskey="a"
            >
              <i class="fa fa-print"></i>
              Save Notes
            </button>
          </div>
        </div>
      </div>
      <div class="row no-gutter">
        <div class="col-md-12">
          <div class="form-group">
            <button
              type="buttons"
              class="btn btn-primary form-control"
              (click)="Print()"
              accesskey="a"
            >
              <i class="fa fa-save"></i>
              Save & Print
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
