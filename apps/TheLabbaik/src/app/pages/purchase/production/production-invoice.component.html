<div widget class="card border-0 box-shadow">
  <div class="card-header transparent border-0 text-muted">
    <h5 class="mb-3">Production</h5>
  </div>
  <div class="card-block widget-body">
    <form (ngSubmit)="SaveData()" #fromProduction="ngForm">
      <div class="row no-pad">
        <div class="col-md-2">
          <label for="dp1">Date:</label>
          <div class="input-group">
            <input
              class="form-control"
              placeholder="yyyy-mm-dd"
              name="dp1"
              [(ngModel)]="production.Date"
              ngbDatepicker
              disabled
              #d1="ngbDatepicker"
            />

            <div class="input-group-append">
              <button
                type="button"
                class="btn btn-warning"
                (click)="d1.toggle()"
              >
                <i class="fa fa-calendar"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="form-group col-md-1">
          <label for="StoreName">Store</label>
          <input
            type="text"
            class="form-control"
            id="StoreName"
            name="StoreName"
            [value]="production.StoreName"
          />
        </div>
        <div class="form-group col-md-4">
          <label for="ProductName">ProductName</label>
          <input
            type="text"
            class="form-control"
            id="ProductName"
            name="ProductName"
            [value]="production.ProductName"
          />
        </div>
        <div class="form-group col-md-2">
          <label for="ProductName">Production Type</label>

          <select
            disabled
            id="ProductionType"
            class="form-control"
            name="ProductionType"
            [value]="production.ProductionType"
          >
            <option value="1">Finish Goods</option>
            <option value="0">Raw Material</option>
          </select>
        </div>
      </div>
      <div class="row match-height no-gutter">
        <div class="col-md-6 col-12">
          <div class="card card-outline-warning box-shadow-0 p-2 m-2">
            <div class="card-content">
              <div class="card-body">
                <!-- card content here  -->
                <h3 class="card-title">Raw Material Despensing</h3>
                <p class="mb-3">provide raw material used</p>
                <form #frmRaw="ngForm">
                  <div class="row no-gutter">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="supplier"
                          >Select Item: (Stock:
                          <strong> {{ SelectedRaw.Stock }}</strong
                          >)</label
                        >
                        <ng-select
                          #cmbItem
                          name="cmbItem"
                          id="cmbItem"
                          class="custom"
                          [items]="RawStock"
                          [virtualScroll]="true"
                          bindLabel="ItemName"
                          bindValue="StockID"
                          placeholder="Select Item..."
                          [(ngModel)]="grndetails.StockID"
                          (change)="RawSelected($event)"
                          required
                        >
                        </ng-select>
                      </div>
                    </div>

                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="qty">Price:</label>
                        <input
                          type="number"
                          class="form-control dation-field"
                          required="required"
                          id="Price"
                          name="Price"
                          [(ngModel)]="grndetails.PPrice"
                          placeholder="0"
                          disabled
                        />
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="qty">Qty:</label>
                        <input
                          type="number"
                          class="form-control dation-field"
                          required="required"
                          id="qty"
                          name="qty"
                          [(ngModel)]="grndetails.Qty"
                          placeholder="0"
                        />
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label>&nbsp;</label>
                        <button
                          type="button"
                          class="btn btn-primary form-control"
                          [disabled]="!frmRaw.form.valid"
                          (click)="AddItem()"
                          accesskey="a"
                        >
                          Add
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
                <p class="mb-1">Despensing Details</p>
                <div
                  class="table-responsive custom-table-height table-bordered table-condensed pb-1"
                >
                  <ng2-smart-table
                    class="table table-hover"
                    [settings]="grnsettings"
                    [source]="grn"
                    (deleteConfirm)="onGrnDelete($event)"
                    (editConfirm)="onGrnEdit($event)"
                  >
                  </ng2-smart-table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="card card-outline-primary box-shadow-0 p-2 m-2">
            <div class="card-content">
              <div class="card-body">
                <!-- card content here  -->
                <h3 class="card-title">Production Output</h3>
                <p class="mb-3">provide production ouput details</p>
                <form #frmProduction="ngForm">
                  <div class="row no-gutter">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="supplier">Select Product:</label>
                        <ng-select
                          #cmbProd
                          name="cmbProd"
                          id="cmbProd"
                          class="custom"
                          [items]="Prods"
                          [virtualScroll]="true"
                          bindLabel="ProductName"
                          bindValue="ProductID"
                          placeholder="Select Item..."
                          [(ngModel)]="pdetails.ProductID"
                          required
                        >
                        </ng-select>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="form-group">
                        <label for="qty">Qty:</label>
                        <input
                          type="number"
                          class="form-control dation-field"
                          required="required"
                          id="qty"
                          name="qty"
                          [(ngModel)]="pdetails.Qty"
                          placeholder="0"
                        />
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-group">
                        <label>&nbsp;</label>
                        <button
                          type="button"
                          class="btn btn-primary form-control"
                          [disabled]="!frmProduction.form.valid"
                          (click)="AddOrder()"
                          accesskey="a"
                        >
                          Add
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
                <p class="mb-1">Production Details</p>
                <div
                  class="table-responsive custom-table-height table-bordered table-condensed pb-1"
                >
                  <ng2-smart-table
                    class="table table-hover"
                    [settings]="settings"
                    [source]="data"
                    (deleteConfirm)="onDeleteConfirm($event)"
                    (editConfirm)="onEdit($event)"
                  >
                  </ng2-smart-table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row match-height no-gutter">
        <div class="col-md-6 col-12">
          <div class="card card-outline-warning box-shadow-0 p-2 m-2">
            <div class="card-content">
              <div class="card-body">
                <!-- card content here  -->
                <h3 class="card-title">Other Expenses</h3>
                <p class="mb-3">other expenses e.g. (Builty, Labour Etc)</p>
                <form #frmexp="ngForm">
                  <div class="row no-gutter">
                    <div class="col-md-4">
                      <div class="form-group">
                        <label for="supplier">Select Item:</label>
                        <ng-select
                          #cmbExp
                          name="cmbItem"
                          id="cmbItem"
                          class="custom"
                          [items]="ExpHeads"
                          [virtualScroll]="true"
                          bindLabel="HeadName"
                          bindValue="HeadID"
                          placeholder="Select Item..."
                          [(ngModel)]="expense.HeadID"
                          (change)="RawSelected($event)"
                          required
                        >
                        </ng-select>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="form-group">
                        <label for="Description">Description:</label>
                        <input
                          type="text"
                          class="form-control dation-field"
                          required="required"
                          id="Description"
                          name="Description"
                          [(ngModel)]="expense.Description"
                        />
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="Amount">Amount:</label>
                        <input
                          type="number"
                          class="form-control dation-field"
                          required="required"
                          id="Amount"
                          name="Amount"
                          [(ngModel)]="expense.Amount"
                        />
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label>&nbsp;</label>
                        <button
                          type="button"
                          class="btn btn-primary form-control"
                          [disabled]="!frmexp.form.valid"
                          (click)="AddExpense()"
                          accesskey="a"
                        >
                          Add
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
                <p class="mb-1">Expenses Details</p>
                <div
                  class="table-responsive custom-table-height table-bordered table-condensed pb-1"
                >
                  <ng2-smart-table
                    class="table table-hover"
                    [settings]="expstngs"
                    [source]="exp"
                  >
                  </ng2-smart-table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="card card-outline-primary box-shadow-0 p-2 m-2">
            <div class="card-content">
              <div class="card-body">
                <!-- card content here  -->
                <h3 class="card-title">Production Summary</h3>
                <p class="mb-3">----------------------</p>

                <div class="row no-gutter">
                  <div class="col-md-12">
                    <div class="row no-gutter">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="RawCost" style="padding-top: 5px"
                            >R/Material Cost:</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            id="RawCost"
                            name="RawCost"
                            [(ngModel)]="production.RawCost"
                            readonly
                          />
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="OtherExp" style="padding-top: 5px"
                            >Other Expenses:</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            id="OtherExp"
                            name="OtherExp"
                            [(ngModel)]="production.OtherExp"
                            readonly
                          />
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="Cost" style="padding-top: 5px"
                            >Total Cost:</label
                          >
                          <input
                            type="number"
                            class="form-control"
                            id="Cost"
                            name="Cost"
                            [(ngModel)]="production.Cost"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-2"></div>
                  <div class="col-md-8">
                    <div class="row no-gutter">
                      <div class="col-md-6">
                        <div class="form-group">
                          <label for="dp2">&nbsp;</label>
                          <button
                            type="button"
                            class="btn btn-success form-control"
                            [disabled]="
                              !fromProduction.form.valid || data.count() == 0
                            "
                            (click)="SaveData()"
                            accesskey="s"
                          >
                            Save
                          </button>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">
                          <label for="dp2">&nbsp;</label>
                          <button
                            type="button"
                            class="btn btn-danger form-control"
                            (click)="Cancel()"
                          >
                            Cancel
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div style="margin: 5px; padding-bottom: 10px"></div>
    </form>
  </div>
</div>
