<div widget class="card border-0 box-shadow">
  <div class="card-header transparent border-0 text-muted">
    <h5 class="mb-3">Sale Order</h5>

  </div>
  <div class="card-block widget-body">
    <form (ngSubmit)="SaveData()" #fromSale="ngForm">
      <div class="row">
        <div class="form-group col-md-3">
          <label for="type">Select Type</label>
          <ejs-combobox
            name="type"
            #type
            id="type"
            (change)="TypeSelect($event)"
            [dataSource]="Typeinfo"
            [fields]="Typefields"
          >
          </ejs-combobox>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label for="customer">Select Account</label>
            <ejs-combobox
              name="customer"
              id="customer"
              [dataSource]="customerinfo"
              [fields]="customerfields"
              [(ngModel)]="Sale.CustomerID"
              required
            >
            </ejs-combobox>
          </div>
        </div>
      </div>
      <form #formqty="ngForm">
        <div class="row no-gutter">
          <div class="col-md-3">
            <div class="form-group">
              <label for="supplier">Select Product:</label>
              <ejs-combobox
                id="prodcat"
                [disabled]="Sale.CustomerID"
                (filtering)="onFiltering($event)"
                [allowFiltering]="true"
                name="prods"
                #cmbProd
                [dataSource]="Prods"
                [fields]="{ text: 'ProductName', value: 'ProductID' }"
                placeholder="Select Item..."
                required="required"
                [(ngModel)]="productdetails.ProductID"
                (change)="ProductSelected($event)"
              >
              </ejs-combobox>
            </div>
          </div>
          <div class="col-md-1">
            <div class="form-group">
              <label for="packing">Packing:</label>
              <input
                type="text"
                readonly
                class="form-control dation-field"
                required="required"
                id="packing"
                name="packing"
                [(ngModel)]="productdetails.Packing"
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-1">
            <div class="form-group">
              <label for="supplier">SPrice:</label>
              <input
                type="text"
                class="form-control"
                id="sprice"
                name="sprice"
                [(ngModel)]="productdetails.SPrice"
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-1">
            <div class="form-group">
              <label for="supplier">Disc(%):</label>
              <input
                type="text"
                class="form-control"
                id="DiscRatio"
                name="DiscRatio"
                [(ngModel)]="productdetails.DiscRatio"
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-1">
            <div class="form-group">
              <label for="qty">Cortons:</label>
              <input
                type="text"
                class="form-control dation-field"
                required="required"
                id="qty"
                name="qty"
                [(ngModel)]="productdetails.Qty"
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-1">
            <div class="form-group">
              <label for="kgs">PCs/KGs:</label>
              <input
                type="text"
                class="form-control"
                id="kgs"
                name="kgs"
                [(ngModel)]="productdetails.KGs"
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <label for="packing">Amount:</label>
              <input
                type="text"
                readonly
                class="form-control dation-field"
                required="required"
                id="amount"
                name="amount"
                [value]="
                  this.productdetails.SPrice *
                    (this.productdetails.Qty * this.productdetails.Packing +
                      this.productdetails.KGs * 1) -
                  (this.productdetails.SPrice *
                    (this.productdetails.Qty * this.productdetails.Packing +
                      this.productdetails.KGs * 1) *
                    this.productdetails.DiscRatio) /
                    100
                "
                placeholder="0"
              />
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <label for="dp2">&nbsp;</label>
              <button
                type="button"
                class="btn btn-block btn-primary Form-control"
                [disabled]="!formqty.form.valid"
                (click)="AddOrder()"
              >
                Add
              </button>
            </div>
          </div>
        </div>
      </form>

      <div class="card-block pt-0 widget-body">
        <h5 class="mb-3">Sale Details</h5>
        <div class="table-responsive">
          <ng2-smart-table
            class="table table-hover"
            [settings]="settings"
            [source]="data"
            (deleteConfirm)="onDeleteConfirm($event)"
            (rowSelect)="onRowSelect($event)"
            (userRowSelect)="onUserRowSelect($event)"
            (editConfirm)="onEdit($event)"
            (rowHover)="onRowHover($event)"
          ></ng2-smart-table>
        </div>
      </div>

      <div class="panel panel-info">
        <div class="panel-body">
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="gtotal">&nbsp;</label>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label for="gtotal">Total Amount:</label>
                <input
                  type="text"
                  class="form-control"
                  id="gtotal"
                  name="gtotal"
                  [(ngModel)]="Sale.Amount"
                  readonly
                />
              </div>
            </div>

            <div class="col-md-2">
              <div class="form-group">
                <label for="gtotal">Discount:</label>
                <input
                  type="text"
                  class="form-control"
                  id="Discount"
                  name="Discount"
                  [(ngModel)]="Sale.Discount"
                  (change)="changel()"
                />
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label for="gtotal">Cash Recieved:</label>
                <input
                  type="text"
                  class="form-control"
                  id="pad"
                  name="pad"
                  [(ngModel)]="Sale.AmntRecvd"
                  (change)="changel()"
                />
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label for="gtotal">Balance Amount:</label>
                <input
                  type="text"
                  class="form-control"
                  id="amount"
                  name="amount"
                  [(ngModel)]="Sale.NetAmount - Sale.AmntRecvd"
                  readonly
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="notes">Notes:</label>
            <input
              type="text"
              class="form-control "
              id="notes"
              name="notes"
              [(ngModel)]="Sale.Notes"
              placeholder="x"
            />
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label for="dp2">&nbsp;</label>
            <button
              type="button"
              class="btn btn-block btn-primary Form-control"
              [disabled]="!fromSale.form.valid || !btnsave"
              (click)="SaveData()"
            >
              Save
            </button>
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label for="dp2">&nbsp;</label>
            <button
              type="button"
              class="btn btn-block btn-danger Form-control"
              (click)="Cancel()"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
