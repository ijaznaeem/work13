<div class="row">
  <div class="col-12">
    <div class="content-header">Account Settings</div>
    <p class="content-sub-header mb-1">
      Configure account settings to your needs.
    </p>
  </div>
</div>
<!-- Account Settings starts -->
<div class="row">
  <div class="col-md-12 mt-3">
    <!-- Nav tabs -->
    <ul class="nav flex-row nav-pills" id="myTab" role="tablist">
      <li class="nav-item">
        <a
          class="nav-link"
          href="javascript:;"
          [ngClass]="{ active: activeTab === 'general' }"
          (click)="setActiveTab('general')"
          id="general-tab"
          data-toggle="tab"
          role="tab"
          aria-controls="general"
          aria-selected="true"
        >
          <i class="ft-settings mr-1 align-middle"></i>
          <span class="align-middle">General</span>
        </a>
      </li>
      <li class="nav-item">
        <a
          class="nav-link"
          href="javascript:;"
          [ngClass]="{ active: activeTab === 'change-password' }"
          (click)="setActiveTab('change-password')"
          id="change-password-tab"
          data-toggle="tab"
          role="tab"
          aria-controls="change-password"
          aria-selected="false"
        >
          <i class="ft-lock mr-1 align-middle"></i>
          <span class="align-middle">Change Password</span>
        </a>
      </li>

    </ul>
  </div>
  <div class="col-md-12">
    <!-- Tab panes -->
    <div class="card">
      <div class="card-content">
        <div class="card-body">
          <div class="tab-content">
            <!-- General Tab -->
            <div
              class="tab-pane"
              [ngClass]="{ active: activeTab === 'general' }"
              id="general"
              role="tabpanel"
              aria-labelledby="general-tab"
            >
              <div class="media">
                <img
                  [src]="getProfilePic()"
                  alt="profile-img"
                  class="rounded mr-3"
                  height="64"
                  width="64"
                />
                <div class="media-body">
                  <div
                    class="col-12 d-flex flex-sm-row flex-column justify-content-start px-0 mb-sm-2"
                  >
                    <button
                      class="btn btn-sm bg-light-primary mb-sm-0"
                      for="select-files"
                      (click)="uploadProfilePic($event)"
                    >
                      Select Photo
                    </button>
                    <input type="file" id="select-files" hidden accept="image/*" />
                    <button class="btn btn-sm bg-light-secondary ml-sm-2"
                    (click)="resetProfilePic()"
                    >
                      <i class="ft-refresh-cw mr-1"></i>
                      <span>Reset</span>
                    </button>
                  </div>
                  <p class="text-muted mb-0 mt-1 mt-sm-0">
                    <small> Allowed JPG, GIF or PNG. Max size of 800kB </small>
                  </p>
                </div>
              </div>
              <hr class="mt-1 mt-sm-2" />
              <form
                [formGroup]="generalForm"
                (ngSubmit)="onGeneralFormSubmit()"
              >
                <div class="row">
                  <div class="col-6 form-group">
                    <label for="name">First Name</label>
                    <div class="controls">
                      <input
                        type="text"
                        formControlName="first_name"
                        class="form-control"
                        placeholder="First Name"
                        [ngClass]="{
                          'is-invalid': generalFormSubmitted && gf.first_name.invalid,
                          'is-valid': generalFormSubmitted && !gf.first_name.invalid
                        }"
                        required
                      />
                      <div
                        *ngIf="
                          generalFormSubmitted &&
                          (gf.first_name.invalid || gf.first_name.errors?.required)
                        "
                        class="help-block mt-1 text-danger"
                      >
                        <i class="ft-alert-circle align-middle"></i> This is
                        required
                      </div>
                    </div>
                  </div>
                  <div class="col-6 form-group">
                    <label for="name">Last Name</label>
                    <div class="controls">
                      <input
                        type="text"
                        formControlName="last_name"
                        class="form-control"
                        placeholder="Last Name"
                        [ngClass]="{
                          'is-invalid': generalFormSubmitted && gf.last_name.invalid,
                          'is-valid': generalFormSubmitted && !gf.last_name.invalid
                        }"
                        required
                      />
                      <div
                        *ngIf="
                          generalFormSubmitted &&
                          (gf.last_name.invalid || gf.last_name.errors?.required)
                        "
                        class="help-block mt-1 text-danger"
                      >
                        <i class="ft-alert-circle align-middle"></i> This is
                        required
                      </div>
                    </div>
                  </div>

                  <div class="col-6 form-group">
                    <label for="username">Username</label>
                    <div class="controls">
                      <input
                        type="text"
                        formControlName="username"
                        class="form-control"
                        placeholder="Username"
                        [ngClass]="{
                          'is-invalid':
                            generalFormSubmitted && gf.username.invalid,
                          'is-valid':
                            generalFormSubmitted && !gf.username.invalid
                        }"
                        required
                        readonly
                      />
                      <div
                        *ngIf="
                          generalFormSubmitted &&
                          (gf.username.invalid || gf.username.errors?.required)
                        "
                        class="help-block mt-1 text-danger"
                      >
                        <i class="ft-alert-circle align-middle"></i> This is
                        required
                      </div>
                    </div>
                  </div>

                  <div class="col-6 form-group">
                    <label for="email">E-mail</label>
                    <div class="controls">
                      <input
                        type="text"
                        formControlName="email"
                        class="form-control"
                        placeholder="E-mail"
                        [ngClass]="{
                          'is-invalid':
                            generalFormSubmitted && gf.email.invalid,
                          'is-valid': generalFormSubmitted && !gf.email.invalid
                        }"
                        required
                      />
                      <div
                        *ngIf="
                          generalFormSubmitted &&
                          (gf.email.invalid || gf.email.errors?.required)
                        "
                        class="help-block mt-1 text-danger"
                      >
                        <i class="ft-alert-circle align-middle"></i> This is
                        required
                      </div>
                    </div>
                  </div>


                  <div
                    class="col-12 d-flex flex-sm-row flex-column justify-content-end"
                  >
                    <button type="submit" class="btn btn-primary mr-sm-2 mb-1">
                      Save Changes
                    </button>
                    <button type="reset" class="btn btn-secondary mb-1">
                      Cancel
                    </button>
                  </div>
                </div>
              </form>
            </div>

            <!-- Change Password Tab -->
            <div
              class="tab-pane"
              [ngClass]="{ active: activeTab === 'change-password' }"
              id="change-password"
              role="tabpanel"
              aria-labelledby="change-password-tab"
            >
              <form
                [formGroup]="changePasswordForm"
                (ngSubmit)="onChangePasswordFormSubmit()"
              >
                <div class="form-group">
                  <label for="old-password">Old Password</label>
                  <div class="controls">
                    <input
                      type="password"
                      formControlName="oldPassword"
                      class="form-control"
                      placeholder="Old Password"
                      [ngClass]="{
                        'is-invalid':
                          changePasswordFormSubmitted &&
                          cpf.oldPassword.invalid,
                        'is-valid':
                          changePasswordFormSubmitted &&
                          !cpf.oldPassword.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        changePasswordFormSubmitted &&
                        (cpf.oldPassword.invalid ||
                          cpf.oldPassword.errors?.required)
                      "
                      class="help-block mt-1 text-danger"
                    >
                      <i class="ft-alert-circle align-middle"></i> This is
                      required
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="new-password">New Password</label>
                  <div class="controls">
                    <input
                      type="password"
                      formControlName="newPassword"
                      class="form-control"
                      placeholder="New Password"
                      [ngClass]="{
                        'is-invalid':
                          changePasswordFormSubmitted &&
                          cpf.newPassword.invalid,
                        'is-valid':
                          changePasswordFormSubmitted &&
                          !cpf.newPassword.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        changePasswordFormSubmitted &&
                        (cpf.newPassword.invalid ||
                          cpf.newPassword.errors?.required)
                      "
                      class="help-block mt-1 text-danger"
                    >
                      <i class="ft-alert-circle align-middle"></i> This is
                      required
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="retype-new-password">Retype New Password</label>
                  <div class="controls">
                    <input
                      type="password"
                      formControlName="retypeNewPassword"
                      class="form-control"
                      placeholder="New Password"
                      [ngClass]="{
                        'is-invalid':
                          changePasswordFormSubmitted &&
                          cpf.retypeNewPassword.invalid,
                        'is-valid':
                          changePasswordFormSubmitted &&
                          !cpf.retypeNewPassword.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        changePasswordFormSubmitted &&
                        (cpf.retypeNewPassword.invalid ||
                          cpf.retypeNewPassword.errors?.required)
                      "
                      class="help-block mt-1 text-danger"
                    >
                      <i class="ft-alert-circle align-middle"></i> This is
                      required
                    </div>
                  </div>
                </div>
                <div class="d-flex flex-sm-row flex-column justify-content-end">
                  <button type="submit" class="btn btn-primary mr-sm-2 mb-1">
                    Save Changes
                  </button>
                  <button type="reset" class="btn btn-secondary mb-1">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Account Settings ends -->
